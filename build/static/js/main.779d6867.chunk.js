(this["webpackJsonptest-react"]=this["webpackJsonptest-react"]||[]).push([[0],{103:function(e,t,a){e.exports=a(219)},219:function(e,t,a){"use strict";a.r(t);var r=a(1),n=a.n(r),s=a(13),l=a.n(s),o=a(42),i=a(43),c=a(47),u=a(44),p=a(48),m=a(10),d=a(20),_=a(32);function E(e,t){return"success"===e?_.b.success(t,{autoClose:3e3}):_.b.error(t,{autoClose:3e3})}var f="FETCH_ALL_USERS_PENDING",h="FETCH_ALL_USERS_SUCCESS",g="FETCH_ALL_USERS_ERROR",b="OPEN_EDIT_MODAL",y="UPDATE_USER_PENDING",v="UPDATE_USER_SUCCESS",N="UPDATE_USER_FAILED",O="DELETE_USER_PENDING",S="DELETE_USER_SUCCESS",U="DELETE_USER_FAILED";function j(e){return function(t){t({type:f}),fetch("https://reqres.in/api/users?page="+e).then((function(e){return e.json()})).then((function(e){t({type:h,users_data:e})})).catch((function(e){E("error","Network request failed!"),t({type:g})}))}}function w(e,t){return function(a){a({type:y}),fetch("https://reqres.in/api/users/"+e.user_id,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then((function(e){return e.json()})).then((function(r){for(var n in t)if(t[n].id===e.user_id){t[n].first_name=e.first_name,t[n].last_name=e.last_name,t[n].email=e.email;break}var s;a((s=t,E("success","User updated successfully!"),{type:v,payload:{users:s}}))})).catch((function(e){console.log(e),a((E("error","An error occured while updating the user!"),{type:N}))}))}}function D(e,t){return function(a){a({type:O}),fetch("https://reqres.in/api/users/"+e,{method:"DELETE",headers:{"Content-Type":"application/json"}}).then((function(r){if(r.ok&&204===r.status){var n=t.filter((function(t){return t.id!==e}));a(function(e){return E("success","User deleted successfully!"),{type:S,payload:{users:e}}}(n))}})).catch((function(e){console.log(e),a((E("error","An error occured while deleting the user!"),{type:U}))}))}}var A=a(227),P=a(223),k=a(224),C=a(226),L=a(225),R=a(99),T=a.n(R),F=function(e){var t=e.input,a=e.label,r=e.type,s=e.meta,l=s.touched,o=s.error;return n.a.createElement("div",null,n.a.createElement("input",Object.assign({},t,{className:"form-control",placeholder:a,type:r})),l&&o&&n.a.createElement("span",{className:"form-error-message"},o))},I=function(e){function t(){var e;return Object(o.a)(this,t),(e=Object(c.a)(this,Object(u.a)(t).call(this))).searchAction=function(t){var a=t.target;e.setState({searchQuery:a.value})},e.filterUsers=function(t){return t?e.props.users.filter((function(e){var a=new RegExp(t,"i");return a.test(e.first_name)||a.test(e.last_name)||a.test(e.email)})):e.props.users},e.state={searchQuery:""},e.onSubmit=e.onSubmit.bind(Object(m.a)(e)),e}return Object(p.a)(t,e),Object(i.a)(t,[{key:"fillFormValuesAndEditPopup",value:function(e){this.props.editPopupAction(this.props.edit_modal_opened);var t={first_name:e.first_name,last_name:e.last_name,email:e.email};this.props.initialize(t),this.props.change("user_id",e.id)}},{key:"deleteUser",value:function(e){var t=this;T()({title:"Are you sure?",text:"You want to delete the user?",icon:"warning",dangerMode:!0,buttons:!0}).then((function(a){a&&t.props.deleteUserAction(e,t.props.users)}))}},{key:"onSubmit",value:function(e){this.props.updateUserAction(e,this.props.users)}},{key:"render",value:function(){var e=this;console.log("rendering");var t=this.props,a=t.project_title,r=t.fetch_users_loading,s=t.edit_modal_opened,l=t.fetch_users_error,o=t.handleSubmit,i=t.updating_user_pending,c=t.total_users,u=t.users_per_page,p=t.current_page,m=this.filterUsers(this.state.searchQuery),d=[],_=[];if(null!==c){for(var E=1;E<=Math.ceil(c/u);E++)d.push(E);_=d.map((function(t){var a=p===t?"page-item active":"page-item";return n.a.createElement("li",{key:t,className:a},n.a.createElement("a",{className:"page-link",href:"#",onClick:function(a){return e.props.fetchUsersAction(a,t)}},t))}))}return n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:"container"},n.a.createElement("div",{className:"row"},n.a.createElement("h3",null," Project is about (",a,")")),n.a.createElement("div",{className:"row mt-5"},n.a.createElement("div",{className:"col-sm"},r?n.a.createElement("button",{className:"btn btn-secondary",type:"button",disabled:!0},n.a.createElement("span",{className:"spinner-grow spinner-grow-sm",role:"status","aria-hidden":"true"}),"Fetching..."):n.a.createElement("button",{className:"btn btn-secondary",onClick:function(t){return e.props.fetchUsersAction(t,1)}},"Fetch Users Data")),n.a.createElement("div",{className:"col-sm"},n.a.createElement("input",{type:"text",className:"form-control",placeholder:"Search here...",onChange:this.searchAction,value:this.state.searchQuery}))),n.a.createElement("div",{className:"row mt-5 table-responsive"},n.a.createElement("table",{className:"table table-hover table-bordered"},n.a.createElement("thead",null,n.a.createElement("tr",null,n.a.createElement("th",{scope:"col"},"Sr. No"),n.a.createElement("th",{scope:"col"},"User Id"),n.a.createElement("th",{scope:"col"},"First Name"),n.a.createElement("th",{scope:"col"},"Last Name"),n.a.createElement("th",{scope:"col"},"Email"),n.a.createElement("th",{scope:"col"},"Avatar"),n.a.createElement("th",{scope:"col"},"Actions"))),n.a.createElement("tbody",null,r?n.a.createElement("tr",null,n.a.createElement("td",{colSpan:"7"},n.a.createElement("img",{src:"/images/loader1.gif",style:{height:"50px",width:"50px"},className:"img-fluid",alt:"loading"}))):m.length>0?m.map((function(t,a){return n.a.createElement("tr",{key:t.id},n.a.createElement("td",null,a+1),n.a.createElement("td",null,t.id),n.a.createElement("td",null,t.first_name),n.a.createElement("td",null,t.last_name),n.a.createElement("td",null,t.email),n.a.createElement("td",null,n.a.createElement("img",{src:t.avatar,height:"50",width:"50",alt:"avatar"})),n.a.createElement("td",null,n.a.createElement("button",{type:"button",className:"btn btn-primary",onClick:function(){return e.fillFormValuesAndEditPopup(t)}},"Edit"),n.a.createElement("button",{type:"button",className:"btn btn-danger ml-1",onClick:function(){return e.deleteUser(t.id)}},"Remove")))})):n.a.createElement("tr",null,l?n.a.createElement("td",{colSpan:"7"},"Error while fetching users data!"):n.a.createElement("td",{colSpan:"7"},"No users found!")))),n.a.createElement("ul",{className:"pagination"},_)),n.a.createElement("div",null,n.a.createElement(A.a,{isOpen:s,toggle:function(){return e.props.editPopupAction(s)}},n.a.createElement(P.a,{toggle:function(){return e.props.editPopupAction(s)}},"Update User Details"),n.a.createElement(k.a,null,n.a.createElement("form",{className:"form",onSubmit:o(this.onSubmit)},n.a.createElement("div",{className:"form-group"},n.a.createElement("label",{className:"label"},"First Name"),n.a.createElement(C.a,{className:"form-control",name:"first_name",component:F,type:"text"})),n.a.createElement("div",{className:"form-group"},n.a.createElement("label",{className:"label"},"Last Name"),n.a.createElement(C.a,{className:"form-control",name:"last_name",component:F,type:"text"})),n.a.createElement("div",{className:"form-group"},n.a.createElement("label",{className:"label"},"Email"),n.a.createElement(C.a,{className:"form-control",name:"email",component:F,type:"email"})),i?n.a.createElement("button",{className:"btn btn-primary",type:"button",disabled:!0},n.a.createElement("span",{className:"spinner-grow spinner-grow-sm",role:"status","aria-hidden":"true"}),"Updating..."):n.a.createElement("button",{className:"btn btn-primary"},"Update")))))))}}]),t}(n.a.Component),x={form:"updateUserDetails",validate:function(e){var t={};return e.first_name||(t.first_name="First name is required!"),e.last_name||(t.last_name="Last name is required!"),e.email?e.email||/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i.test(e.email)||(t.email="Invalid email address"):t.email="Email address is required!",t},enableReinitialize:!0,keepDirtyOnReinitialize:!0},q=Object(L.a)(x)(I),M=Object(d.b)((function(e){return{project_title:e.global.project_title,users:e.usersData.users,fetch_users_loading:e.usersData.is_users_data_loading,fetch_users_error:e.usersData.error,edit_modal_opened:e.usersData.edit_modal_opened,updating_user_pending:e.usersData.updating_user_pending,total_users:e.usersData.total_users,users_per_page:e.usersData.users_per_page,current_page:e.usersData.current_page}}),(function(e){return{fetchUsersAction:function(t,a){t.preventDefault(),e(j(a))},editPopupAction:function(t){e(function(e){return{type:b,payload:e}}(t))},updateUserAction:function(t,a){e(w(t,a))},deleteUserAction:function(t,a){e(D(t,a))}}}))(q),Q=(a(218),function(e){function t(){return Object(o.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return n.a.createElement(n.a.Fragment,null,n.a.createElement(M,null),n.a.createElement(_.a,null))}}]),t}(n.a.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var z=a(7),G=a(101),H={project_title:"Data fetching Application"},J=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:H;arguments.length>1&&arguments[1];return e},V=a(45);function Z(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function B(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Z(a,!0).forEach((function(t){Object(V.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Z(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var W={is_users_data_loading:!1,users:[],error:null,edit_modal_opened:!1,updating_user_pending:!1,total_users:null,users_per_page:null,current_page:null},X=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:W,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case f:return B({},e,{is_users_data_loading:!0});case h:return B({},e,{is_users_data_loading:!1,users:t.users_data.data,total_users:t.users_data.total,users_per_page:t.users_data.per_page,current_page:t.users_data.page});case g:return B({},e,{is_users_data_loading:!1,error:!0});case b:return B({},e,{edit_modal_opened:!t.payload});case y:return B({},e,{updating_user_pending:!0});case v:return B({},e,{updating_user_pending:!1,edit_modal_opened:!1,users:t.payload.users});case N:return B({},e,{updating_user_pending:!1,edit_modal_opened:!1});case O:return B({},e,{updating_user_pending:!0});case S:return B({},e,{updating_user_pending:!1,users:t.payload.users});case U:return B({},e,{updating_user_pending:!1});default:return e}},$=a(228),Y=Object(z.c)({global:J,usersData:X,form:$.a}),K=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||z.d,ee=Object(z.e)(Y,K(z.a.apply(void 0,[G.a])));window.store=ee;var te=ee;l.a.render(n.a.createElement(d.a,{store:te},n.a.createElement(Q,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[103,1,2]]]);
//# sourceMappingURL=main.779d6867.chunk.js.map